# se-lab-exp-3

# استفاده از TDD:

## بخش اول:

در این بخش ابتدا به یافتن **۲ ایراد** مربوط به می‌پردازیم.


1. ایراد اول این هست که در تابع lendBook چک نمی‌کند که کاربر آیا وجود دارد یا نه و اگر دانش‌اموز ثبت‌نام نکرده‌ای بخواهد کتاب ثبت شده‌ای را بگیرد می‌تواند غلط است و باید چک شود که آیا دانش‌آموز قبلا ثبتنام کرده‌است یا نه.
2. ایراد دوم نیز این هست که در تابع returnBook بعد از چک کردن اینکه این دانش‌آموز کتاب را قبلا قرض گرفته یا نه این کتاب را از لیست کتاب‌های آن دانش‌آموز حذف نمی‌کنیم و یک دانش‌آموز می‌تواند یک کتاب را چندبار پس دهد که خطا است. 

در ادامه ۲ تست برای شناسایی و این مشکلات می‌نویسیم.

1. در تست checkStudentRegistered که در کلاس LibraryTests آن را مشاهده‌ می‌کنید چک می‌کنیم که وقتی دانش‌آموزی ثبتنام نکرده باشد نباید بتواند کتابی را به امانت بگیرد.
که در ابتدا مشاهده می‌کنیم این تست ناموفق شد.

![img.png](images/img.png)

سپس در ادامه کد تابع lendBook را به شکل زیر تغییر دادیم:

![img_1.png](images/img_1.png)

و وقتی دوباره تست را اجرا کردیم تست با موفقیت پاس شد و خطای مربوطه را نمایش داد:

![img_2.png](images/img_2.png)


2. برای مشکل دوم ابتدا تست می‌نویسیم که در این تست یک کاربر تلاش کند یک کتاب را دوبار برگرداند و باید دفعه دوم خطا دریافت کند.
در ابتدا مشاهده می‌کنیم که تست ناموفق می‌شود و دانش‌آموز توانسته است دوبار کتاب را برگرداند.

![img_3.png](images/img_3.png)

سپس کد مربوط به تابع برگرداندن کتاب را اصلاح می‌کنیم که در شکل زیر اصلاح شده آن‌را مشاهده‌می‌کنید:

![img_4.png](images/img_4.png)

و بعد از آن وقتی تست را اجرا کنیم با موفقیت پاس می‌شود و یک کاربر نمی‌تواند دوبار یک کتاب را برگرداند.:

![img_5.png](images/img_5.png)